{% extends "base.html" %}
{% block content %}
<style>
  body {
    background: #f9f9f9;
    font-family: "Poppins", sans-serif;
    overflow-x: hidden;
  }

  /* Hero Section */
  .hero-carousel-container {
    width: 100%;
    height: 60vh;
    max-height: 420px;
    position: relative;
    overflow: hidden;
    border-radius: 12px;
    margin-bottom: 30px;
  }

  .hero-slide {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 100%;
    opacity: 0;
    transition: all 1s ease-in-out;
    z-index: 0;
  }

  .hero-slide.active {
    left: 0;
    opacity: 1;
    z-index: 1;
    animation: wipeEffect 1s ease forwards;
  }

  @keyframes wipeEffect {
    0% {
      clip-path: inset(0 100% 0 0);
    }
    100% {
      clip-path: inset(0 0 0 0);
    }
  }

  .hero-slide img {
    width: 100%;
    height: 100%;
    object-fit: contain; /* show full image without crop */
    background-color: #fff;
  }

  .hero-badges {
    position: absolute;
    bottom: 12px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 6px;
    z-index: 10;
  }

  .hero-badge {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: rgba(255,255,255,0.7);
    transition: background 0.3s, transform 0.3s;
  }

  .hero-badge.active {
    background: #b8860b;
    transform: scale(1.2);
  }

  /* Categories */
  .categories {
    display: flex;
    justify-content: center;
    gap: 16px;
    flex-wrap: wrap;
    padding: 0 10px;
    margin-bottom: 40px;
  }

  .cat-card {
    flex: 1 1 180px;
    max-width: 220px;
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 3px 12px rgba(0,0,0,0.1);
    overflow: hidden;
    text-align: center;
    transition: transform 0.3s;
  }

  .cat-card:hover {
    transform: translateY(-4px);
  }

  .cat-card img {
    width: 100%;
    height: auto;
    object-fit: contain;
  }

  .cat-card h3 {
    font-size: 16px;
    margin: 8px 0;
    color: #b8860b;
  }

  /* Top Selling Products */
  .top-selling-products h2 {
    text-align: center;
    font-size: 1.5rem;
    font-weight: 700;
    color: #b8860b;
    margin-bottom: 20px;
  }

  .products-cards {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 16px;
  }

  .products-cards .cat-card {
    max-width: 180px;
  }

  .price {
    font-weight: 600;
    color: #333;
  }

  .add-to-cart-btn {
    margin: 8px 0 14px;
    padding: 8px 16px;
    background: #b8860b;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }

  /* About & Contact */
  .about, .contact {
    text-align: center;
    margin: 40px 10px;
  }

  .about h2, .contact h2 {
    color: #b8860b;
    margin-bottom: 10px;
  }

  .about p, .contact p {
    font-size: 15px;
    color: #333;
    line-height: 1.5;
  }

  @media(max-width:768px){
    .hero-carousel-container { height: 45vh; max-height: 340px; }
    .cat-card img { height: auto; }
    .products-cards .cat-card { max-width: 150px; }
    .hero-badge { width: 8px; height: 8px; }
  }
</style>

<!-- Hero Image Carousel -->
<div class="hero-carousel-container">
  <div class="hero-slide active">
    <img src="{{ url_for('static', filename='css/uploads/ho_s.JPG') }}" alt="Herbal Product 1">
  </div>
  <div class="hero-slide">
    <img src="{{ url_for('static', filename='css/uploads/sikakai_s.JPG') }}" alt="Herbal Product 2">
  </div>
  <div class="hero-slide">
    <img src="{{ url_for('static', filename='css/uploads/hm_s3.JPG') }}" alt="Herbal Product 4">
  </div>
  <div class="hero-slide">
    <img src="{{ url_for('static', filename='css/uploads/hm_s2.JPG') }}" alt="Herbal Product 5">
  </div>
  <div class="hero-slide">
    <img src="{{ url_for('static', filename='css/uploads/hm_s.JPG') }}" alt="Herbal Product 6">
  </div>
  <div class="hero-slide">
    <img src="{{ url_for('static', filename='css/uploads/np_s.JPG') }}" alt="Herbal Product 7">
  </div>
  <div class="hero-slide">
    <img src="{{ url_for('static', filename='css/uploads/np_s2.JPG') }}" alt="Herbal Product 8">
  </div>

  <div class="hero-badges">
    <span class="hero-badge active"></span>
    <span class="hero-badge"></span>
    <span class="hero-badge"></span>
    <span class="hero-badge"></span>
    <span class="hero-badge"></span>
    <span class="hero-badge"></span>
    <span class="hero-badge"></span>
    <span class="hero-badge"></span>
  </div>
</div>

<!-- Categories -->
<section class="categories">
  <div class="cat-card">
    <img src="{{ url_for('static', filename='css/uploads/slide4.JPG') }}" alt="Face Care">
    <h3>Face Care</h3>
  </div>
  <div class="cat-card">
    <img src="{{ url_for('static', filename='css/uploads/slide5.JPG') }}" alt="Skin Care">
    <h3>Skin Care</h3>
  </div>
  <div class="cat-card">
    <img src="{{ url_for('static', filename='css/uploads/slide7.JPG') }}" alt="Hair Care">
    <h3>Hair Care</h3>
  </div>
  <div class="cat-card">
    <img src="{{ url_for('static', filename='css/uploads/slide6.JPG') }}" alt="Body Care">
    <h3>Body Care</h3>
  </div>
</section>

<!-- Top Selling Products -->
<!-- Top Selling Products -->
<section class="top-selling-products">
  <h2>Top Selling Products</h2>
  <div class="products-cards">
    {% for p in products %}
    <div class="cat-card">
      <img src="{{ url_for('static', filename='css/uploads/' ~ p.image) }}" alt="{{ p.title }}">
      <div class="card-info">
        <h3>{{ p.title }}</h3>
        {% if p.subtitle %}<p class="subtitle">{{ p.subtitle }}</p>{% endif %}
        <p class="price">Rs. {{ p.price }}</p>
        <button class="add-to-cart-btn" data-id="{{ p.id }}">Add to Cart</button>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

<script>
  // Handle Add to Cart button clicks
  document.addEventListener("click", async (e) => {
    if (e.target.classList.contains("add-to-cart-btn")) {
      const id = e.target.dataset.id;
      const res = await fetch(`/add_to_cart/${id}`, { method: "POST" });
      const data = await res.json();
      if (data.success) {
        document.getElementById("cart-count").textContent = data.cart_count;
        e.target.textContent = "Added ‚úì";
        e.target.disabled = true;
      }
    }
  });
</script>

<!-- About & Contact -->
<section class="about">
  <h2>Our Story</h2>
  <p>Natural Bloom crafts herbal personal-care products using traditional Ayurvedic ingredients ‚Äî designed to nourish and strengthen.</p>
</section>

<section class="contact">
  <h2>Contact</h2>
  <p>194, Sri Sakthi Nagar, Gandhinagar Post, Kurinjipadi Taluk, Cuddalore - 607308</p>
  <p>üìû +91-7449299859 | ‚úâÔ∏è naturalbloomcare@hotmail.com</p>
</section>

<!-- JS for Wipe Slideshow -->
<script>
  const slides = document.querySelectorAll('.hero-slide');
  const badges = document.querySelectorAll('.hero-badge');
  let index = 0;

  function showSlide(i) {
    slides.forEach((s, idx) => s.classList.toggle('active', idx === i));
    badges.forEach((b, idx) => b.classList.toggle('active', idx === i));
  }

  setInterval(() => {
    index = (index + 1) % slides.length;
    showSlide(index);
  }, 3500);
</script>
{% endblock %}
